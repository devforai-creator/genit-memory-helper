# Genit Memory Helper (Tampermonkey)

Genit 대화 로그를 정형화된 JSON으로 추출하고, LLM 요약 프롬프트를 원클릭 복사해 유저노트(2000자)에 넣을 수 있게 하는 사용자 스크립트입니다.

## 📥 설치 방법

이 스크립트는 [Tampermonkey](https://www.tampermonkey.net/) 확장 프로그램을 통해 사용할 수 있습니다.

1. 먼저 Tampermonkey를 설치하세요. (Chrome/Edge/Firefox 지원)
2. 아래 버튼을 클릭해 스크립트를 설치하세요:

👉 [**최신 버전 다운로드 (Raw)**](https://github.com/devforai-creator/genit-memory-helper/raw/main/genit-memory-helper.user.js)


3. 브라우저가 `.user.js` 파일을 다운로드하면, Tampermonkey가 자동으로 설치 화면을 띄워줍니다.  
   "Install" 버튼을 눌러주면 완료됩니다 ✅

---

### 🔄 업데이트
- 새 버전이 나오면 위의 Raw 페이지에 올라갑니다.  
- 기존 유저는 Tampermonkey가 자동으로 업데이트를 체크합니다.  
- v0.9: DOM 어댑터 도입, 데이터 속성 우선 셀렉터, 자동 스크롤 안정화.  
- v0.8: 자동 스크롤 패널 추가, 플레이어 턴 기반 메타/상태 표시 통일.  



## 사용법
- **위로 끝까지 로딩**: 버튼 한 번으로 대화 상단까지 자동 스크롤합니다.
- **최근 플레이어 턴 N 확보**: 입력한 플레이어 턴 수가 확보될 때까지 자동으로 추가 로그를 불러옵니다.
- **최근 15턴 복사**: 새 대화 흐름만 빠르게 정리해 AI에 붙여넣거나 검수할 때 활용하세요. (15턴은 화자 패턴 따라 변동될 수 있으니 참고용입니다.)
- **전체 Markdown 복사**: 세션 전체를 한 번에 복사해 유저노트나 개인 기록용으로 붙여넣습니다.
- **요약/재요약 가이드**: LLM용 프롬프트를 클립보드로 복사합니다(문구가 “JSON” 대신 “로그 파일” 기준으로 정리됨).
- **재파싱**: 오류가 날 경우 로그를 다시 읽어 상태를 확인합니다.

### 권장 UX 플로우
1. 대화 진행 → 적당히 길어지면  
2. 위로 스크롤 후 **파일 내보내기**에서 목적에 맞는 포맷 선택(TXT = LLM, MD = 검수/백업, JSON = 디버그)  
3. ChatGPT/Gemini 등에 파일 업로드 + **요약 가이드** 붙여넣기  
4. 결과를 Genit **유저노트(≤2000자)** 에 붙여넣기  
5. 이후는 **재요약 가이드**와 새 로그 파일로 누적 업데이트

## 요약 범위 선택 (중요 UX)
Genit Memory Helper는 **현재 화면에 로드된 대화만** JSON으로 내보냅니다.  
따라서 사용자가 원하는 구간까지 로그를 불러와야 그 부분이 요약에 포함됩니다.  

### 빠르게 스크롤하기
- 패널의 **위로 끝까지 로딩** 버튼을 누르면 더 이상 로드할 항목이 없을 때까지 자동으로 스크롤합니다.
- 특정 시점까지만 확보하고 싶다면 **최근 플레이어 턴 N 확보** 입력란에 원하는 턴 수를 넣고 실행하면 됩니다. (플레이어가 발화해야 턴이 증가하며, 연속 발화는 1턴으로 합쳐집니다.)

👉 즉, 스크롤을 어디까지 올리느냐가 곧 “요약 범위 선택”이 됩니다.  
이 단순한 제스처 덕분에 사용자는 "어디까지 기억을 정리할지"를 직접 컨트롤할 수 있습니다.

## 주의!!!!
json 파일을 외부 llm에게 주입하는 순간, 대화내역의 민감한 정보가 포함될 수 있으니, 주의하세요. 자세한 사항은 PRIVACY.md파일을 참조하세요. 민감한 정보는, 수동으로 json파일을 수정해서 넣으셔도 됩니다. 

## FAQ
- **서버로 전송되나요?** 아니요. 모든 처리는 로컬에서만 이뤄집니다.
- **성능에 영향 있나요?** DOM 파싱만 수행, 서버 요청 증가 없음.
- **고장 시?** DOM 클래스/텍스트가 바뀌면 패널의 **재파싱** 버튼으로 확인 후, GitHub 이슈에 보고해주세요.

### Q. 민감한 내용이 포함되면 어떻게 하나요?
A. 스크립트는 자동으로 대화 로그를 요약하지만, 민감한 부분까지 전부 안전하게 처리해 주는 건 아닙니다.  
👉 따라서 중요한 내용은 직접 입력하거나, 요약 결과를 확인하면서 스스로 수정해 주시는 게 가장 안전합니다.

### Q. JSON 용량이 너무 크면 요약이 안 되는데요?
A. 네, 모델에는 **토큰(token)**이라는 입력 한계가 있습니다.  
- 5만~10만 토큰 정도까지는 대체로 괜찮지만, 50만 이상이 되면 모델이 한 번에 처리하지 못해 요약이 빈칸으로 나올 수 있습니다.  
- 해결 방법:
  1. **장면(scene) 단위**로 로그를 쪼개서 요약하기  
  2. **필요한 부분만 발췌**해서 요약하기  
  3. 나눠서 요약한 뒤 → 최종적으로 다시 합쳐서 정리하기  

👉 즉, 토큰이 너무 많으면 “나눠서 처리”하는 것이 가장 확실한 방법입니다.

## 유지보수 정책
이 스크립트는 개인 프로젝트로 제작되었으며, **유지보수는 보장되지 않습니다**.  
이슈 및 PR은 환영하지만, 학업 일정 등으로 인해 응답이 늦거나 반영되지 않을 수 있습니다.  
치명적인 버그(예: 전혀 작동하지 않는 경우)에 한해서만 가볍게 대응할 수 있습니다.  
필요하다면 자유롭게 포크해서 수정·사용해 주세요.

## 라이선스
MIT License
